/*
 * File: Sodoku.cpp
 * ---------------------------------------
 * Check if the board is valid sodoku
 */

#include <iostream>
#include <vector>
using namespace std;

bool isValidSudoku(vector<vector<char>> &board);

int main()
{
    vector<vector<char>> sodoku1 = {{'3', '9', '2', '4', '6', '5', '8', '1', '7'},
                                    {'7', '4', '1', '8', '9', '3', '6', '2', '5'},
                                    {'6', '8', '5', '2', '7', '1', '4', '3', '9'},
                                    {'2', '5', '4', '1', '3', '8', '7', '9', '6'},
                                    {'8', '3', '9', '6', '2', '7', '1', '5', '4'},
                                    {'1', '7', '6', '9', '5', '4', '2', '8', '3'},
                                    {'9', '6', '7', '5', '8', '2', '3', '4', '1'},
                                    {'4', '2', '3', '7', '1', '9', '5', '6', '8'},
                                    {'5', '1', '8', '3', '4', '6', '9', '7', '2'}};
    vector<vector<char>> sodoku2 = {{'3', '9', '2', '4', '6', '5', '8', '1', '7'},
                                    {'7', '4', '1', '4', '9', '3', '6', '2', '5'},
                                    {'6', '8', '5', '2', '7', '1', '4', '3', '5'},
                                    {'2', '5', '4', '1', '3', '8', '7', '9', '6'},
                                    {'8', '3', '9', '6', '2', '7', '1', '5', '4'},
                                    {'1', '7', '6', '9', '5', '4', '2', '8', '3'},
                                    {'9', '6', '7', '5', '8', '2', '3', '4', '1'},
                                    {'4', '2', '3', '7', '1', '9', '5', '6', '8'},
                                    {'5', '1', '8', '3', '4', '6', '9', '7', '2'}};
    vector<vector<char>> sodoku3 = {{'.', '.', '2', '4', '.', '5', '8', '.', '.'},
                                    {'.', '4', '1', '8', '.', '.', '.', '2', '.'},
                                    {'6', '.', '.', '.', '7', '.', '.', '3', '9'},
                                    {'2', '.', '.', '.', '3', '.', '.', '9', '6'},
                                    {'.', '.', '9', '6', '.', '7', '1', '.', '.'},
                                    {'1', '7', '.', '.', '5', '.', '.', '.', '3'},
                                    {'9', '6', '7', '5', '8', '2', '3', '4', '1'},
                                    {'.', '2', '.', '.', '.', '9', '5', '6', '.'},
                                    {'.', '.', '8', '3', '.', '6', '9', '.', '.'}};
    cout << isValidSudoku(sodoku1) << endl;
    cout << isValidSudoku(sodoku2) << endl;
    cout << isValidSudoku(sodoku3) << endl;
    return 0;
}

bool isValidSudoku(vector<vector<char>> &board)
{
    bitset<9> Col[9];
    bitset<9> Row[9];
    bitset<9> Block[9];

    for (int i = 0; i < 9; i++)
    {
        for (int j = 0; j < 9; j++)
        {
            char c = board[i][j];
            if (c == '.')
                continue;
            int x = (c - '0') % 9;

            if (Row[i][x])
                return 0;
            Row[i][x] = 1;

            if (Col[j][x])
                return 0;
            Col[j][x] = 1;

            int bidx = (i / 3) * 3 + j / 3;
            if (Block[bidx][x])
                return 0;
            Block[bidx][x] = 1;
        }
    }
    return 1;
}